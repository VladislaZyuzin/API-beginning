# Лаба по созданию туристической справки
> Тут что то более менее путное
## ТЗ
Написать на питоне код, который обращается к различным апишикам за данными:
1. В какую страну будет посещение (дать данные о столице и коде валюты)
2. Рассчитать сколько денег будет обменяно в путешествии при текущем курсе.
3. Берутся данные о погоде в отдельно взятом городе на ближайшие 5 дней.
## Выполнение
### Данные о стране
Для того, чтобы выполнить эту часть кода - необходимо обратиться к API, которая содержит информацию о странах на текущий момент времени. 

В результате поисков - я обратился к сайту: `restcountries.com`. Он даёт всю информацию о стране.

Из плюсов - тут не требуется ключь для получения данных, всё что нужно можно получить через определённые команды, с которыми можно ознакомиться в документации к API сайта.

Перейдём к первой части кода: 
```py
import requests  # Эта библиотека будет полезна при работе с многими API 

print("=====Туристическая справка=====\n")


def get_country():  # Метод, в котором мы через API обращаемся за инфой по странам
    while True:
        country = input("Введите страну на английском (или 'exit' для выхода): ").strip()    # .strip() - удаление лишних пробелов

        if country.lower() == 'exit':    # .lower() - защита от различных описаний 'exit'. Можно хоть капсом писать
            print("Выход из программы... ")
            return None, None

        try:
            url = f"https://restcountries.com/v3.1/name/{country}"
            response = requests.get(url)

            # Проверяем статус ответа
            if response.status_code == 404:
                print("Страна не найдена. Попробуйте ещё раз.")
                continue

            response.raise_for_status()  # Проверяем другие HTTP-ошибки

            data = response.json()
            capital = data[0]['capital'][0]
            print(f"Столица: {capital}")
            currency_code = list(data[0]['currencies'].keys())[0]  # Эту команду следует запомнить, так как именно она даёт код валюты
            print(f"Код валюты: {currency_code}\n")
            return capital, currency_code
        except requests.exceptions.RequestException as e:
            print(f"Ошибка подключения: {e}. Проверьте интернет и попробуйте ещё раз.")
        except (KeyError, IndexError):
            print("Не удалось обработать данные страны. Попробуйте другое название.")  # Эта ситуация актуальна для Китая (КНР)
        except Exception as e:
            print(f"Неизвестная ошибка: {e}. Попробуйте ещё раз.")

```

Разбор команды `currency_code = list(data[0]['currencies'].keys())[0]`:
![image](https://github.com/user-attachments/assets/789355a0-aa61-49c2-952a-6645f7a8d623)

Как видно по коду, вывод представляет собой:
1. Столицу страны.
2. Код валюты.

### Пересчёт валюты в рубли.

Далее по ТЗ необходимо было получить данные о стоимости валюты в выбранной стране к рублю, для этого я воспользовался API: `api.exchangerate-api.com`. Она показывает актуальный курс валют. 

Мой код выглядит следующим образом:
```py
def translation(currency_code):

    print("===Программа для рассчёта валюты===\n")

    while True:

        decision = input(f"Напишите 'да', если хотети продолжить или 'нет' если не хотите: \n")

        if decision.lower() == 'нет':
            print("Выход их программы...")
            return None, None

        elif decision.lower() == 'да':

            try:
                url = f"https://api.exchangerate-api.com/v4/latest/{currency_code}"
                response = requests.get(url)
                data = response.json()
                money = float(input(f"Введите количество рублей, которые вы возьмёте в поездку: "))

                abroad_curr = float(data['rates']['RUB'])    # Из интересного, воны КНДР не конвертируются в рубли :)
                common_ammount = money / abroad_curr

                print(f"Стоимость 1 {currency_code} составляет: {data['rates']['RUB']} рублей")
                print(f"Если вы возбмёте с собой {money} рублей, то вы сможете их поменять на {round(common_ammount, 2)} {currency_code}")    # {round(common_ammount, 2)}  - выводит значение с 2-мя цифрами после запятой

                return True

            except Exception as e:
                print(f"Неизвестная ошибка: {e}. Попробуйте ещё раз.")

        else:
            print("Неправильный ввод, попробуйте ещё раз")

```

Как видно в коде, при неправильном рассчёте у нас возникает бесконечный цикл, который можно остановить либо при правильном вводе данных или при вводе "нет".

### Поиск прогноза погоды
